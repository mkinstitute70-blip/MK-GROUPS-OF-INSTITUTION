<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MK GROUP OF INSTITUTIONS | OFFICIAL SYSTEM</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           CORE SYSTEM VARIABLES & THEMES
           ========================================= */
        :root {
            --p: #2ECC71;           
            --orange: #FF8C00;      
            --bg: #FFFFFF;          
            --card: #F9FBFC;        
            --dark: #0F172A;        
            --text-main: #1E293B; 
            --text-sub: #64748B;
            --header-h: 160px;
            --radius: 22px;
            --shadow: 0 15px 35px rgba(0,0,0,0.08);
        }

        body.dark-mode { --bg: #000; --card: #111; --text-main: #fff; --text-sub: #94A3B8; --dark: #000; }
        body.gold-mode { --p: #D4AF37; --orange: #B8860B; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        
        body { 
            background-color: var(--bg); 
            color: var(--text-main); 
            padding-top: calc(var(--header-h) + 15px); 
            transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }

        /* HEADER */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--header-h);
            background: var(--dark); z-index: 10000; 
            display: flex; flex-direction: column;
            border-bottom: 4px solid var(--p);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .brand-zone { flex: 1; display: flex; align-items: center; justify-content: center; }
        .brand-zone h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(14px, 5.5vw, 24px);
            color: var(--p); text-transform: uppercase; font-weight: 900; letter-spacing: 2px;
        }

        nav.nav-grid {
            height: 85px; display: grid; grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr); background: #000;
        }

        .n-btn {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #666; border: none; background: none; cursor: pointer; transition: 0.3s;
        }

        .n-btn i { font-size: 18px; margin-bottom: 2px; color: var(--p); }
        .n-btn span { font-size: 8px; font-weight: 800; text-transform: uppercase; }
        .n-btn.active { background: rgba(46, 204, 113, 0.15); color: #fff; }

        .container { padding: 15px; max-width: 800px; margin: 0 auto; padding-bottom: 120px; }
        .view { display: none; }
        .view.active { display: block; animation: slideUp 0.6s ease; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .mk-card {
            background: var(--card); border-radius: var(--radius); padding: 25px;
            margin-bottom: 25px; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.03);
            position: relative; overflow: hidden;
        }

        .mk-card h3 { font-size: 18px; font-weight: 800; margin-bottom: 18px; color: var(--p); text-transform: uppercase; display: flex; align-items: center; gap: 10px; }

        /* HERO */
        .hero-box {
            width: 100%; height: 200px; border-radius: var(--radius);
            background: linear-gradient(rgba(0,0,0,0.3), rgba(15,23,42,0.9)), 
                        url('https://images.unsplash.com/photo-1524178232363-1fb2b075b655?auto=format&fit=crop&w=1000');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #fff; margin-bottom: 25px; border: 2px solid var(--p);
        }

        .highlight-wrap { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
        .h-item { 
            background: var(--dark); padding: 20px; border-radius: 18px; text-align: center;
            border: 1px solid var(--p);
        }
        .h-item i { color: var(--p); font-size: 24px; margin-bottom: 8px; }
        .h-item b { display: block; color: #fff; font-size: 11px; font-weight: 900; text-transform: uppercase; }

        .res-strip {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--bg); padding: 18px; border-radius: 15px; margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.04); border-right: 4px solid var(--p);
        }
        .res-strip .name { color: var(--orange); font-weight: 900; font-size: 16px; text-transform: uppercase; }

        /* INPUTS */
        .mk-input { 
            width: 100%; padding: 18px; background: #fff; border: 2px solid #F1F5F9; 
            border-radius: 16px; margin-bottom: 15px; font-weight: 700; color: #333;
        }
        body.dark-mode .mk-input { background: #000; border-color: #222; color: #fff; }

        .big-btn { 
            width: 100%; padding: 20px; background: var(--p); color: #000; 
            border: none; border-radius: 16px; font-weight: 900; text-transform: uppercase; cursor: pointer;
        }

        .del-badge { background: #ff4757; color: #fff; padding: 4px 10px; border-radius: 8px; font-size: 10px; cursor: pointer; border: none; font-weight: 800; }

        footer { text-align: center; padding: 60px 20px; background: #000; color: #444; font-size: 10px; }
    </style>
</head>
<body id="master_body">

<header>
    <div class="brand-zone"><h1>MK GROUP OF INSTITUTIONS</h1></div>
    <nav class="nav-grid">
        <button class="n-btn active" onclick="nav('home', this)"><i class="fa fa-home"></i><span>Home</span></button>
        <button class="n-btn" onclick="nav('admission', this)"><i class="fa fa-user-plus"></i><span>Apply</span></button>
        <button class="n-btn" onclick="nav('academics', this)"><i class="fa fa-graduation-cap"></i><span>Acad/Fees</span></button>
        <button class="n-btn" onclick="nav('routine', this)"><i class="fa fa-history"></i><span>Routine</span></button>
        <button class="n-btn" onclick="nav('campus', this)"><i class="fa fa-camera-retro"></i><span>Campus</span></button>
        <button class="n-btn" onclick="nav('notice_view', this)"><i class="fa fa-broadcast-tower"></i><span>Notice</span></button>
        <button class="n-btn" onclick="nav('portal', this)"><i class="fa fa-fingerprint"></i><span>Portal</span></button>
        <button class="n-btn" onclick="nav('admin', this)"><i class="fa fa-key"></i><span>Admin</span></button>
    </nav>
</header>

<main class="container">
    <section id="home" class="view active">
        <div class="hero-box">
            <h2>Welcome to MK Classes</h2>
            <p>AS KHRAB COLLEGE KASNI JHAJJAR</p>
            <div style="font-size:9px; background:var(--p); color:#000; padding:4px 12px; border-radius:50px; margin-top:10px; font-weight:900;">BOYS & GIRLS HOSTEL AVAILABLE</div>
        </div>
        <div class="highlight-wrap">
            <div class="h-item"><i class="fa fa-shield"></i><b>Sainik School</b></div>
            <div class="h-item"><i class="fa fa-medal"></i><b>RMS / RIMC</b></div>
        </div>
        <div class="mk-card">
            <h3><i class="fa fa-award" style="color:var(--orange)"></i> Hall of Fame 2026</h3>
            <div id="res_wall">Syncing Records...</div>
        </div>
    </section>

    <section id="admission" class="view">
        <div class="mk-card">
            <h3>Online Registration</h3>
            <input type="text" class="mk-input" placeholder="Cadet's Name">
            <input type="text" class="mk-input" placeholder="Contact Number">
            <button class="big-btn">Submit Application</button>
        </div>
    </section>

    <section id="academics" class="view">
        <div class="mk-card">
            <h3>Yearly Fee Ledger</h3>
            <div style="display:flex; justify-content:space-between; padding:15px 0; border-bottom:1px solid rgba(0,0,0,0.05);"><span>Junior Wing</span><b>₹1,40,000</b></div>
            <div style="display:flex; justify-content:space-between; padding:15px 0;"><span>Senior Wing</span><b>₹1,75,000</b></div>
        </div>
    </section>

    <section id="routine" class="view">
        <div class="mk-card">
            <h3>Military Daily Routine</h3>
            <div style="font-size:13px; line-height:2.5; font-weight:700;">
                <p><span style="color:var(--p)">05:00 AM</span> - Wake Up Call</p>
                <p><span style="color:var(--p)">08:30 AM</span> - Class Session I</p>
                <p><span style="color:var(--p)">10:30 PM</span> - Lights Out</p>
            </div>
        </div>
    </section>

    <section id="campus" class="view">
        <div class="mk-card">
            <h3>Campus Media</h3>
            <div id="g_wall" style="display:grid; grid-template-columns:1fr 1fr; gap:12px;"></div>
        </div>
    </section>

    <section id="notice_view" class="view">
        <div class="mk-card">
            <h3>Digital Notice Board</h3>
            <div id="not_wall">Connecting...</div>
        </div>
    </section>

    <section id="portal" class="view">
        <div class="mk-card" id="p_gate">
            <h3>Cadet Dashboard</h3>
            <input id="ui" class="mk-input" placeholder="Cadet ID (MK-XXX)">
            <button class="big-btn" onclick="portalAuth()">Login to Profile</button>
        </div>
        <div id="p_dash" style="display:none;"></div>
    </section>

    <section id="admin" class="view">
        <div class="mk-card" id="a_gate">
            <h3>System Authorization</h3>
            <input type="password" id="pin" class="mk-input" style="text-align:center; letter-spacing:8px;" placeholder="••••">
            <button class="big-btn" onclick="adminAuth()">Unlock System</button>
        </div>

        <div id="a_console" style="display:none;">
            <div class="mk-card" style="background:var(--dark); color:#fff;">
                <h3><i class="fa fa-palette"></i> Power 1: Theme</h3>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                    <button class="big-btn" style="padding:10px;" onclick="applyTheme('DARK')">Dark</button>
                    <button class="big-btn" style="padding:10px; background:#D4AF37;" onclick="applyTheme('GOLD')">Gold</button>
                </div>
            </div>

            <div class="mk-card">
                <h3><i class="fa fa-dollar-sign"></i> Power 2: Fee Sync</h3>
                <input id="sn" class="mk-input" placeholder="Name">
                <input id="si" class="mk-input" placeholder="ID (MK-101)">
                <input id="sp" class="mk-input" placeholder="Paid Amount">
                <input id="st" class="mk-input" placeholder="Total Package">
                <button class="big-btn" onclick="saveStudent()">Sync Record</button>
                <div id="adm_fee_list" style="margin-top:15px;"></div>
            </div>

            <div class="mk-card">
                <h3><i class="fa fa-trophy"></i> Power 3: Hall of Fame</h3>
                <input id="rn" class="mk-input" placeholder="Student Name">
                <input id="rr" class="mk-input" placeholder="Selection Details">
                <button class="big-btn" onclick="saveResult()">Push Result</button>
                <div id="adm_res_list" style="margin-top:15px;"></div>
            </div>

            <div class="mk-card">
                <h3><i class="fa fa-bullhorn"></i> Power 4: Notices</h3>
                <textarea id="adm_not" class="mk-input" placeholder="Announcement..."></textarea>
                <button class="big-btn" onclick="saveNotice()">Broadcast</button>
                <div id="adm_not_list" style="margin-top:15px;"></div>
            </div>

            <div class="mk-card">
                <h3><i class="fa fa-image"></i> Power 5: Gallery</h3>
                <input id="adm_img" class="mk-input" placeholder="Image URL">
                <button class="big-btn" onclick="saveGallery()">Add Photo</button>
                <div id="adm_gal_list" style="margin-top:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
            </div>

            <button class="big-btn" style="background:#e74c3c; color:#fff;" onclick="location.reload()">System Exit</button>
        </div>
    </section>
</main>

<footer><b>MK GROUP OF INSTITUTIONS</b><br>Defence Preparatory Academy | 2026</footer>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<script>
    const MASTER_PIN = "Mkclasses@1303";
    const firebaseConfig = {
        apiKey: "AIzaSyAUbxlce-AurocYx2qQ9DW_wwFI4VTHCl0",
        authDomain: "mk-group-c27c9.firebaseapp.com",
        projectId: "mk-group-c27c9",
        storageBucket: "mk-group-c27c9.appspot.com",
        messagingSenderId: "789213760789",
        appId: "1:789213760789:web:e54db27b65b8b488ba2d1c"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function nav(id, btn) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.n-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        window.scrollTo(0,0);
    }

    function adminAuth() {
        if(document.getElementById('pin').value === MASTER_PIN) {
            document.getElementById('a_gate').style.display = 'none';
            document.getElementById('a_console').style.display = 'block';
        } else alert("INVALID ACCESS!");
    }

    /* THEME */
    function applyTheme(t) {
        document.getElementById('master_body').classList.remove('dark-mode', 'gold-mode');
        if(t === 'DARK') document.getElementById('master_body').classList.add('dark-mode');
        if(t === 'GOLD') document.getElementById('master_body').classList.add('gold-mode');
        localStorage.setItem('MK_THEME', t);
    }

    /* CLOUD OPERATIONS (ADD) */
    async function saveResult() {
        let n = document.getElementById('rn').value, r = document.getElementById('rr').value;
        if(n && r) await db.collection("hall").add({n, r});
    }

    async function saveGallery() {
        let u = document.getElementById('adm_img').value;
        if(u) await db.collection("gallery").add({u});
    }

    async function saveNotice() {
        let m = document.getElementById('adm_not').value;
        if(m) await db.collection("notice").add({m, date: new Date().toLocaleDateString(), ts: Date.now()});
    }

    async function saveStudent() {
        let n = document.getElementById('sn').value, i = document.getElementById('si').value.toUpperCase(),
            p = document.getElementById('sp').value, t = document.getElementById('st').value;
        if(n && i) await db.collection("students").doc(i).set({n, i, p, t});
    }

    /* DELETE POWER */
    async function del(col, id) { if(confirm("Permanently Delete?")) await db.collection(col).doc(id).delete(); }

    /* REAL-TIME SYNC ENGINE */
    function startSync() {
        // Results
        db.collection("hall").onSnapshot(snap => {
            let h = "", a = "";
            snap.forEach(doc => {
                let d = doc.data();
                h += `<div class="res-strip"><span class="name">${d.n}</span><b>${d.r}</b></div>`;
                a += `<div class="res-strip">${d.n} <button class="del-badge" onclick="del('hall','${doc.id}')">DEL</button></div>`;
            });
            document.getElementById('res_wall').innerHTML = h || "No Records";
            document.getElementById('adm_res_list').innerHTML = a;
        });

        // Gallery
        db.collection("gallery").onSnapshot(snap => {
            let h = "", a = "";
            snap.forEach(doc => {
                let d = doc.data();
                h += `<img src="${d.u}" style="width:100%; height:130px; border-radius:15px; object-fit:cover;">`;
                a += `<div><img src="${d.u}" width="100%"><button class="del-badge" onclick="del('gallery','${doc.id}')" style="width:100%">DEL</button></div>`;
            });
            document.getElementById('g_wall').innerHTML = h;
            document.getElementById('adm_gal_list').innerHTML = a;
        });

        // Notices
        db.collection("notice").orderBy("ts", "desc").onSnapshot(snap => {
            let h = "", a = "";
            snap.forEach(doc => {
                let d = doc.data();
                h += `<div style="background:var(--bg); padding:15px; border-radius:15px; margin-bottom:10px; border-left:4px solid var(--p);">
                        <small style="color:var(--p);">${d.date}</small><p><b>${d.m}</b></p></div>`;
                a += `<div class="res-strip">${d.m.substring(0,15)}... <button class="del-badge" onclick="del('notice','${doc.id}')">DEL</button></div>`;
            });
            document.getElementById('not_wall').innerHTML = h || "No Updates";
            document.getElementById('adm_not_list').innerHTML = a;
        });

        // Student Admin List
        db.collection("students").onSnapshot(snap => {
            let a = "";
            snap.forEach(doc => {
                let d = doc.data();
                a += `<div class="res-strip">${d.n} (${d.i}) <button class="del-badge" onclick="del('students','${doc.id}')">DEL</button></div>`;
            });
            document.getElementById('adm_fee_list').innerHTML = a;
        });
    }

    async function portalAuth() {
        let i = document.getElementById('ui').value.toUpperCase();
        let doc = await db.collection("students").doc(i).get();
        if(doc.exists) {
            let s = doc.data();
            document.getElementById('p_gate').style.display='none';
            document.getElementById('p_dash').style.display='block';
            document.getElementById('p_dash').innerHTML = `
                <div class="mk-card" style="text-align:center;">
                    <h3 style="color:var(--orange)">CADET: ${s.n}</h3>
                    <div style="display:flex; justify-content:space-between; margin-top:15px;"><span>Paid</span><b style="color:var(--p)">₹${s.p}</b></div>
                    <div style="display:flex; justify-content:space-between;"><span>Balance</span><b style="color:red">₹${s.t - s.p}</b></div>
                    <button class="big-btn" style="margin-top:20px; background:#eee;" onclick="location.reload()">Logout</button>
                </div>`;
        } else alert("WRONG ID!");
    }

    window.onload = () => {
        startSync();
        let t = localStorage.getItem('MK_THEME');
        if(t) applyTheme(t);
    };
</script>
</body>
</html>
